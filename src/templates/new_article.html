{% extends "dashboard_base.html" %}

{% block title %}New entry | {{ block.super }}{% endblock %}
{% block page_header %}
{% if edit %}
  Edit compendium entry
{% else %}
  New compendium entry
{% endif %}
{% endblock %}

{% block contents %}
{{ block.super }}

{% comment %}
If we're just editing an entry, we should display only the form for editing the
entry. Otherwise, we should display two forms: one for creating an entry through
the edit form, and another that allows you to display the form.
{% endcomment %}

{% if edit %}
{% include "form_templates/compendium_entry_edit_form.html" with form=new_entry_form edit=edit only %}
{% else %}
<ul class="uk-tab" data-uk-tab="{connect:'#upload_form'}">
  <li class="uk-active">
    <a href="#">Enter manually</a>
  </li>
  <li>
    <a href="#">Upload BibTeX</a>
  </li>
</ul>

<ul id="upload_form" class="uk-list uk-switcher">
  <li>
    {% include "form_templates/compendium_entry_edit_form.html" with form=new_entry_form edit=edit only %}
  </li>
  <li>
    {% include "form_templates/bibtex_upload_form.html" with form=bibtex_form only %}
  </li>
</ul>
{% endif %}
{% endblock %}

{% block css %}
{{ block.super }}
{% load static %}
<link rel="stylesheet" href="{% static 'codemirror/lib/codemirror.css' %}">
<link rel="stylesheet" href="{% static 'css/components/htmleditor.min.css' %}">
{% endblock %}

{% block javascripts %}
{{ block.super }}
{% load static %}
<script src="{% static 'codemirror/lib/codemirror.js' %}"></script>
<script src="{% static 'codemirror/mode/markdown/markdown.js' %}"></script>
<script src="{% static 'codemirror/addon/mode/overlay.js' %}"></script>
<script src="{% static 'codemirror/mode/xml/xml.js' %}"></script>
<script src="{% static 'codemirror/mode/gfm/gfm.js' %}"></script>
<script src="{% static 'js/marked.min.js' %}"></script>
<script src="{% static 'js/components/htmleditor.min.js' %}"></script>
{% endblock %}
