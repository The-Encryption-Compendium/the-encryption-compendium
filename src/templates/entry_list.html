{% extends 'base.html' %}

{% comment %}
Display a list of entries from the compendium
{% endcomment %}

{% block body %}
<div class="uk-container">
  <div class="uk-margin-top">
    <h1 class="uk-h1">
      Search results
    </h1>

    <hr>

    <div class="uk-container">
      <div class="uk-grid-match" uk-grid>
        <div class="uk-width-1-2@m">
          <h3>Seeing results {{ start }} - {{ end }} out of {{ hits }}</h3>
        </div>
        <div class="uk-width-1-2@m uk-text-right uk-text-small">
          <span class="monospace uk-text-muted">Search finished in {{ qtime }}ms</span>
        </div>
      </div>

      <div class="uk-container uk-width-1-2@m uk-text-center">
        {% include "includes/searchbar.html" with form=search_form only %}
      </div>

      {% if hits == 0 %}
      <div class="uk-text-center">
        <h3>No results were found matching the query</h3>
      </div>
      {% endif %}

      {% if suggested_query %}
      <p class="uk-text-lead">
        Did you mean to search for
        <a href="?query={{ suggested_query }}&rows={{ rows }}" class="uk-text-italic">{{ suggested_query }}</a>?
      </p>
      {% endif %}

      {% for entry in entries %}
        {% include "includes/entry_snippet.html" with entry=entry only %}
      {% endfor %}
    </div>
  </div>

  <br class="sep">

  {% comment %}
  Pagination controls; allow user to go to next or previous page of
  search results.
  {% endcomment %}

  {% if hits > 0 %}
  <div>
    <div class="uk-grid uk-text-center uk-width-1-1 paginator">
      {# Display options to go to the next and previous page(s) #}
      <div class="uk-width-1-3">
      {% if page > 0 %}
        <a href="?query={{ query }}&rows={{ rows }}&page=0">
          <span uk-icon="icon:chevron-double-left;ratio:1.5"></span> first
        </a> |
        <a href="?query={{ query }}&rows={{ rows }}&page={{ page|add:-1 }}">previous</a>
      {% endif %}
      </div>

      <div class="uk-width-1-3">
        Page {{ page|add:1 }} of {{ n_pages }}
      </div>

      <div class="uk-width-1-3">
      {% if page < n_pages|add:-1 %}
        <a href="?query={{ query }}&rows={{ rows }}&page={{ page|add:1 }}">next</a> |
        <a href="?query={{ query }}&rows={{ rows }}&page={{ n_pages }}">
          last <span uk-icon="icon:chevron-double-right;ratio:1.5"></span>
        </a>
      {% endif %}
      </div>
    </div>
  </div>
  {% endif %}

</div>
{% endblock %}
